import{fI as d,fJ as O,r as l,fK as P,fL as h,t as v,fM as S,fN as _,fO as N,fP as z,fQ as F,fR as w,fS as J,fT as K,fU as T,aH as V,bl as $,fV as A}from"./index.4cc6cf99.js";function g(t){return y[B(t)]||L}function B(t){return t instanceof Blob?t.type:E(t.url)}function E(t){const i=d(t);return m[i]||I}const y={},I="text/plain",L=y[I],m={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const t in m)y[m[t]]=t;function W(t){const i=l(t)&&t.origins?t.origins:[void 0];return(n,r)=>{const o=k(t,n,r);for(const a of i){const s=O(n,a,r);for(const e in o)s[e]=o[e]}}}function k(t,i,n){if(l(t)&&t.type==="resource")return D(t,i,n);switch(l(t)&&t.type?t.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:o}=A;return{read:r,write:o}}}}function D(t,i,n){const r=J(i,n);return{type:String,read:(o,a,s)=>{const e=P(o,a,s);return r.type===String?e:typeof r.type=="function"?new r.type({url:e}):void 0},write:{writer(o,a,s,e){if(!e||!e.resources)return typeof o=="string"?void(a[s]=h(o,e)):void(a[s]=o.write({},e));const c=Q(o),p=c?h(c,{...e,verifyItemRelativeUrls:e&&e.verifyItemRelativeUrls?{writtenUrls:e.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},S.NO):null,u=r.type!==String&&(!_(this)||e&&e.origin&&this.originIdOf(n)>N(e.origin));e&&e.portalItem&&l(p)&&!z(p)?u?G(this,n,o,p,a,s,e,t):H(p,a,s,e):e&&e.portalItem&&(v(p)||l(F(p))||w(p)||u)?b(this,n,o,p,a,s,e,t):a[s]=p}}}}function b(t,i,n,r,o,a,s,e){const c=K(),p=x(n,r,s),u=T(V(e,"prefix"),c),R=`${u}.${g(p)}`,f=s.portalItem.resourceFromPath(R);w(r)&&s.resources.pendingOperations.push(M(r).then(j=>{f.path=`${u}.${g(j)}`,o[a]=f.itemRelativeUrl}).catch(()=>{})),U(t,i,f,p,s.resources.toAdd),o[a]=f.itemRelativeUrl}function G(t,i,n,r,o,a,s,e){const c=s.portalItem.resourceFromPath(r),p=x(n,r,s);g(p)===d(c.path)?(U(t,i,c,p,s.resources.toUpdate),o[a]=r):b(t,i,n,r,o,a,s,e)}function H(t,i,n,r){r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(t)}),i[n]=t}function U(t,i,n,r,o){o.push({resource:n,content:r,finish:a=>{q(t,i,a)}})}function x(t,i,n){return typeof t=="string"?{url:i}:new Blob([JSON.stringify(t.toJSON(n))],{type:"application/json"})}async function M(t){const i=(await $(()=>import("./index.4cc6cf99.js").then(function(r){return r.t$}),["assets/index.4cc6cf99.js","assets/index.d961661c.css"])).default,{data:n}=await i(t,{responseType:"blob"});return n}function Q(t){return v(t)?null:typeof t=="string"?t:t.url}function q(t,i,n){typeof t[i]=="string"?t[i]=n.url:t[i].url=n.url}export{W as w};
