import{oI as N,oJ as S,oK as $,bN as c,oL as w,oM as I,R as U,r as D,bI as O,oN as g,oO as M,oP as T,oQ as f,oR as j,oS as h,oT as d,oU as v}from"./vendor.e1f4f720.js";function J(e,t,a,o){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?B(e,t,o):I(e,t,o).then(r=>x(r,e.name,t,a,o)):Promise.reject(new U("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function x(e,t,a,o,r){const u=e.data,m=a&&D(a.portal)?a.portal:O.getDefault(),p={portal:m,url:c(e.baseUrl),origin:"portal-item"},s=u.items.find(n=>n.name===t);if(!s){const n=`The symbol name '${t}' could not be found`;return Promise.reject(new U("symbolstyleutils:symbol-name-not-found",n,{symbolName:t}))}let i=g(M(s,o),p),y=s.thumbnail&&s.thumbnail.href;const b=s.thumbnail&&s.thumbnail.imageData;T()&&(i=f(i),y=f(y));const P={portal:m,url:c(w(i)),origin:"portal-item"};return N(i,r).then(n=>{const R=o==="cimRef"?S(n.data):n.data,l=$(R,P);if(l&&j(l)){if(y){const E=g(y,p);l.thumbnail=new h({url:E})}else b&&(l.thumbnail=new h({url:`data:image/png;base64,${b}`}));e.styleUrl?l.styleOrigin=new d({portal:a.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new d({portal:a.portal,styleName:e.styleName,name:t}))}return l})}function B(e,t,a){const o=v.replace(/\{SymbolName\}/gi,e.name),r=D(t.portal)?t.portal:O.getDefault();return N(o,a).then(u=>{const m=S(u.data);return $(m,{portal:r,url:c(w(o)),origin:"portal-item"})})}export{x as fetchSymbolFromStyle,J as resolveWebStyleSymbol};
